CREATE TABLE DEPARTMENT (
    DID NUMBER(3) PRIMARY KEY,
    DNAME VARCHAR(50),
    DHEAD VARCHAR(50)
);


CREATE TABLE EMPLOYEE(
    EID NUMBER(6) PRIMARY KEY,
    INITIAL VARCHAR(5) CHECK (INITIAL IN('DR','MISS','MRS','MR','PROF')),
    FIRSTNAME VARCHAR(50) NOT NULL,
    MIDDLENAME VARCHAR(50),
    LASTNAME VARCHAR(50),
    DESIGNATION VARCHAR(50),
    DOB DATE NOT NULL,
    DATE_OF_JOIN DATE,
    FTYPE VARCHAR(50) CHECK(FTYPE IN ('TEACHING','NON TEACHING')),
    NATIONALITY VARCHAR(50),
    PHONE NUMBER(10) NOT NULL,
    EMAIL VARCHAR(100) NOT NULL,
    CASTE VARCHAR(50),
    DOORNO VARCHAR(20),
    CITY VARCHAR(50),
    STATE VARCHAR(50),
    PINCODE NUMBER(6),
    GENDER VARCHAR(6) CHECK(GENDER IN('MALE','FEMALE','OTHER')),
    PROFEXP_DESIGNATION VARCHAR(50),
    PPROFEXP_FROM DATE,
    PPROFEXP_TO DATE,
    LEAVE_ML NUMBER(2),
    LEAVE_LOP NUMBER(2),
    LEAVE_RH NUMBER(2),
    LEAVE_OOD NUMBER(2),
    LEAVE_CL NUMBER(2),
    DID NUMBER(3),
    FOREIGN KEY (DID) REFERENCES DEPARTMENT(DID)
);


CREATE TABLE EMPLOYEEDETAILS (
    EID NUMBER(6),
    BIOMETRIC_CARD_NO VARCHAR(20),
    AADHAR NUMBER(12) UNIQUE,
    BANK_ACC VARCHAR(14) UNIQUE,
    PAN VARCHAR(20) UNIQUE ,
    PRIMARY KEY (EID, AADHAR),
    FOREIGN KEY (EID) REFERENCES EMPLOYEE(EID)
);


CREATE TABLE SALARY (
    EID NUMBER(6),
    BASIC_SAL NUMBER(10, 2),
    AGP NUMBER(10, 2),
    ESI NUMBER(10, 2),
    LOAN NUMBER(10, 2),
    IT NUMBER(10, 2),
    FOREIGN KEY (EID) REFERENCES EMPLOYEE(EID)
);


CREATE TABLE PAYROLL (
    EID NUMBER(6),
    P_DATE DATE,
    NO_OF_DAYS NUMBER(3),
    PF NUMBER(10, 2),
    VA NUMBER(10, 2),
    PRIMARY KEY (EID, P_DATE),
    FOREIGN KEY (EID) REFERENCES EMPLOYEE(EID)
);


CREATE TABLE QUALIFICATION (
    EID NUMBER(6),
    INSTITUTION VARCHAR(100),
    PERCENTAGE NUMBER(5, 2),
    SPECIALIZATION VARCHAR(50),
    YOG NUMBER(4),
    PRIMARY KEY (EID, INSTITUTION,PERCENTAGE,SPECIALIZATION,YOG),
    FOREIGN KEY (EID) REFERENCES EMPLOYEE(EID)
);


CREATE TABLE LEAVE (
    EID NUMBER(6),
    LTYPE VARCHAR(10) CHECK(LTYPE IN ('ML','LOP','RH','OOD','CL')),
    APPROVAL VARCHAR(20) CHECK(APPROVAL IN('APPROVED','PENDING','REJECTED')),
    NO_OF_DAYS NUMBER(3),
    FOREIGN KEY (EID) REFERENCES EMPLOYEE(EID)
);


CREATE TABLE FAMILY (
    EID NUMBER(6),
    FNAME VARCHAR(50),
    F_DOB DATE,
    MNAME VARCHAR(50),
    M_DOB DATE,
    FOREIGN KEY (EID) REFERENCES EMPLOYEE(EID)
);


CREATE TABLE ATTENDANCE (
    EID NUMBER(6),
    A_DATE DATE,
    STATUS VARCHAR(10) CHECK(STATUS IN('ABSENT','PRESENT')),
    LOGIN TIME,
    LOGOUT TIME,
    PRIMARY KEY (EID, A_DATE),
    FOREIGN KEY (EID) REFERENCES EMPLOYEE(EID)
);

